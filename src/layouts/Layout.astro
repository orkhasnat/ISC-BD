---
import "@fontsource/merriweather";
import "@fontsource/lato";

import "@/styles/index.css";

import Footer from "@/components/Sections/Footer.astro";
import Header from "@/components/Sections/Header.astro";
// import Loader from "@/components/loader.astro";

const site = Astro.site.toString().slice(0, -1);
// const base = import.meta.env.BASE_URL; // not needed for custom domain
// const socialMetaImage = site + base + "/" + "logo.webp"; // not needed for custom domain
// const socialMetaImage = new URL("logo.jpeg", Astro.site);
const socialMetaImage = site + "/logo.webp";
const { pageTitle } = Astro.props;
const SiteDescription =
	"Initiative for Social Change Bangladesh. Working to create a society that values the dignity and freedom of lives on earth";

/* Paper Texture - Grainy SVG Pattern */
const paperTexture = `data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E`;

// to reduce bundle size
// <!-- initialize theme -->
// 	<script is:inline>
// 		const themeSaved = localStorage.getItem("theme");

// 		if (themeSaved) {
// 			document.documentElement.dataset.theme = themeSaved;
// 		} else {
// 			const prefersDark = window.matchMedia(
// 				"(prefers-color-scheme: dark)",
// 			).matches;
// 			document.documentElement.dataset.theme = prefersDark ? "dark" : "light";
// 		}

// 		window
// 			.matchMedia("(prefers-color-scheme: dark)")
// 			.addEventListener("change", (event) => {
// 				if (!localStorage.getItem("theme")) {
// 					document.documentElement.dataset.theme = event.matches
// 						? "dark"
// 						: "light";
// 				}
// 			});
// 	</script>
---

<html lang="en" class="h-full scroll-smooth">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content={SiteDescription} />
		<title>{pageTitle}</title>

		<!-- social media -->
		<meta property="og:title" content="ISC-BD" />
		<meta property="og:type" content="website" />
		<meta property="og:description" content={SiteDescription} />
		<meta property="og:image" content={socialMetaImage} />
		<meta property="og:url" content={site} />
		<meta name="twitter:card" content="summary_large_image" />
	</head>
	<body class="flex min-h-full flex-col font-body text-foreground antialiased bg-background" style={`background-image: url("${paperTexture}");`}>
        <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:z-50 focus:p-4 focus:bg-background focus:text-primary">Skip to content</a>
		<Header />
		<main id="main-content" class="flex-1">
			<slot />
		</main>
		<Footer />
	</body>
</html>
